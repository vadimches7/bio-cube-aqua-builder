# Парсер каталога рыб с FanFishka.ru

Скрипт для автоматического сбора данных о аквариумных рыбках с сайта [fanfishka.ru](https://fanfishka.ru).

## Установка

1. Убедитесь, что у вас установлен Python 3.7 или выше:
```bash
python3 --version
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

Или используйте виртуальное окружение (рекомендуется):
```bash
python3 -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
pip install -r requirements.txt
```

## Использование

Запустите скрипт:
```bash
python3 fanfishka_parser.py
```

Скрипт выполнит следующие действия:
1. Определит количество страниц в каталоге
2. Соберет все ссылки на статьи о рыбах
3. Для каждой статьи извлечет:
   - Название (русское и латинское)
   - Изображение
   - Описание
   - Параметры воды (pH, температура)
   - Минимальный объем аквариума
   - Размер рыбы
   - Темперамент
   - Сложность содержания
4. Сохранит результаты в файл `fish_catalog.json`

## Настройка

В начале файла `fanfishka_parser.py` можно изменить:
- `DELAY_BETWEEN_REQUESTS` - задержка между запросами (по умолчанию 1 секунда)
- `OUTPUT_FILE` - имя выходного файла (по умолчанию `fish_catalog.json`)

## Важно: Проверка селекторов

После первого запуска **обязательно проверьте селекторы** в коде. Сайты могут менять структуру HTML, и возможно потребуется скорректировать:

- Селекторы для карточек статей (метод `collect_fish_links_from_page`)
- Селекторы для заголовков и контента (метод `parse_fish_article`)

Откройте сайт в браузере с DevTools и проверьте актуальные классы элементов.

## Формат выходных данных

Результаты сохраняются в формате JSON, соответствующем структуре `ExternalFishData`:

```json
[
  {
    "id": 1,
    "name_ru": "Неон Голубой",
    "name_lat": "Paracheirodon innesi",
    "type": "freshwater",
    "family_group": "Харациновые",
    "size_cm": 4,
    "min_tank_liters": 40,
    "bio_load_points": 2,
    "temperament": "Мирный",
    "min_group_size": 6,
    "difficulty": 1,
    "water_params": {
      "ph_min": 5.0,
      "ph_max": 7.0,
      "temp_min": 20,
      "temp_max": 26
    },
    "incompatible_tags": [],
    "description_short": "...",
    "features_list": ["..."]
  }
]
```

## Обработка ошибок

Скрипт включает:
- Автоматические повторы при ошибках сети
- Логирование всех операций
- Сохранение частичных результатов при прерывании (Ctrl+C)

## Использование результатов

После парсинга файл `fish_catalog.json` можно:
1. Переместить в `src/data/` для использования в проекте
2. Объединить с существующими данными (`freshwater_species.json`, `marine_species.json`)
3. Использовать конвертер `fishDataConverter.ts` для преобразования в формат приложения

